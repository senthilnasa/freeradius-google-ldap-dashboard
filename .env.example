# =================================================================================
# FreeRADIUS Google LDAP Configuration - EXAMPLE TEMPLATE
# =================================================================================
# Copy this file to .env and update with your actual values
# cp .env.example .env
# Required: Google Workspace with Secure LDAP enabled

# =================================================================================
# NETWORK CONFIGURATION
# =================================================================================
# Network range allowed to access FreeRADIUS server (usually your Access Points)
ACCESS_ALLOWED_CIDR=10.10.0.0/16

# RADIUS shared secret (CHANGE THIS!)
SHARED_SECRET=your_radius_shared_secret

# =================================================================================
# GOOGLE LDAP CONFIGURATION
# =================================================================================
# Your Google Workspace domain configuration
BASE_DOMAIN=yourdomain
DOMAIN_EXTENSION=com

# Google LDAP certificate paths (these point to mounted cert files)
GOOGLE_LDAPTLS_CERT=/etc/freeradius/certs/ldap-client.crt
GOOGLE_LDAPTLS_KEY=/etc/freeradius/certs/ldap-client.key

# Google LDAP server (standard for all Google Workspace)
LDAP_SERVER=ldaps://ldap.google.com:636

# Google LDAP service account credentials (from Google Admin Console)
LDAP_IDENTITY=your_ldap_service_account_username
LDAP_PASSWORD=your_ldap_service_account_password

# LDAP search base DN (update with your domain)
LDAP_BASE_DN=dc=yourdomain,dc=com
LDAP_BIND_DN=ou=users,dc=yourdomain,dc=com

# =================================================================================
# DATABASE CONFIGURATION
# =================================================================================
# MySQL database settings
DB_HOST=mysql
DB_PORT=3306
DB_NAME=radius
DB_USER=radius
DB_PASSWORD=YourSecureDatabasePassword123!
DB_ROOT_PASSWORD=YourSecureRootPassword123!

# Database performance settings
DB_MAX_CONNECTIONS=150
ENABLE_SQL_TRACE=false

# MySQL timezone setting (examples: UTC, Asia/Kolkata, America/New_York, Europe/London)
MYSQL_TIMEZONE=Asia/Kolkata

# MySQL timezone offset (format: +HH:MM or -HH:MM)
# Common offsets: +05:30 (IST), +00:00 (UTC), -05:00 (EST), +01:00 (CET)
MYSQL_TIMEZONE_OFFSET=+05:30

# =================================================================================
# DOCKER COMPOSE SETTINGS
# =================================================================================
# Container ports
RADIUS_AUTH_PORT=1812
RADIUS_ACCT_PORT=1813
MYSQL_PORT=3306
DASHBOARD_PORT=8080

# =================================================================================
# DASHBOARD CONFIGURATION
# =================================================================================
# Admin dashboard credentials (CHANGE THESE!)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=change_this_password_123
ADMIN_EMAIL=admin@yourdomain.com

# Dashboard security settings
JWT_SECRET=YourVerySecureJWTSecretKeyThatIsAtLeast32CharactersLong123!
SESSION_COOKIE_SECURE=false
FORCE_PASSWORD_CHANGE=true
ADMIN_SESSION_TIMEOUT=3600
BCRYPT_ROUNDS=12

# Domain configuration with VLAN assignments (JSON format)
# Configure your organization's domains with their respective VLANs
#
# Key-based matching within a single domain:
# - "key": Match this substring in the username before @ (e.g., ".mba" matches "john.mba@krea.edu.in")
# - Empty "key" ("") acts as the default/fallback for that domain
# - Entries are evaluated in order, first match wins
#
# Example for key-based matching (single domain with different user types):
DOMAIN_CONFIG=[{"domain":"krea.ac.in","key":".mba","Type":"Student-MBA","VLAN":"216"},{"domain":"krea.ac.in","key":".sias","Type":"Student-SIAS","VLAN":"224"},{"domain":"krea.ac.in","key":".phd","Type":"Student-Ph D","VLAN":"232"},{"domain":"krea.ac.in","key":".bba","Type":"Student-BBA","VLAN":"240"},{"domain":"krea.ac.in","key":"","Type":"Student-Others","VLAN":"144"},{"domain":"krea.edu.in","key":"","Type":"Staff","VLAN":"248"}]
#
# Example for multiple domains (legacy format still supported):
# DOMAIN_CONFIG=[{"domain":"staff.yourdomain.com","Type":"Staff","VLAN":"10"},{"domain":"students.yourdomain.com","Type":"Student","VLAN":"20"},{"domain":"guest.yourdomain.com","Type":"Guest","VLAN":"30"}]

# =================================================================================
# ACCOUNTING REPLICATION TO FIREWALL/NAS
# =================================================================================
# Send accounting packets to firewall or external RADIUS server
# Set ENABLE_ACCT_REPLICATION=true to enable accounting packet forwarding
ENABLE_ACCT_REPLICATION=false

# Firewall/External RADIUS server IP address
FIREWALL_ACCT_SERVER=10.10.10.1

# Firewall RADIUS accounting port (usually 1813)
FIREWALL_ACCT_PORT=1813

# Shared secret for firewall RADIUS communication (CHANGE THIS!)
FIREWALL_ACCT_SECRET=your_firewall_radius_secret

# =================================================================================
# PERFORMANCE & LOGGING
# =================================================================================
# Connection limits and performance tuning
RADIUS_MAX_CONNECTIONS=150
LDAP_MAX_CONNECTIONS=30
LOG_LEVEL=info
ENABLE_LDAP_DEBUG=false

# =================================================================================
# DEBUG & SECURITY SETTINGS
# =================================================================================
# Set to 'true' to log usernames and passwords (DEVELOPMENT ONLY!)
# Set to 'false' for production (passwords will be masked in logs)
LOG_SENSITIVE_DATA=false
ENVIRONMENT=production

# =================================================================================
# LEGACY SETTINGS
# =================================================================================
# Legacy RADIUS secret (use SHARED_SECRET instead)
RADIUS_SECRET=YourSecureRadiusSecret123!

# Client network ranges (usually internal networks)
RADIUS_CLIENT_NETWORKS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# LDAP cache timeout in seconds (3000 = 50 minutes, recommended for performance)
CACHE_TIMEOUT=3000

# =================================================================================
# SECURITY NOTES
# =================================================================================
# BEFORE PRODUCTION DEPLOYMENT:
# 1. ✅ Change ALL default passwords (SHARED_SECRET, DB_PASSWORD, ADMIN_PASSWORD, etc.)
# 2. ✅ Update ACCESS_ALLOWED_CIDR to restrict access to your AP networks only
# 3. ✅ Place your Google LDAP certificates in the 'certs' directory:
#    - certs/ldap-client.crt (Google LDAP client certificate)
#    - certs/ldap-client.key (Google LDAP client private key - chmod 600)
# 4. ✅ Update DOMAIN_CONFIG to match your Google Workspace domains
# 5. ✅ Update BASE_DOMAIN and DOMAIN_EXTENSION
# 6. ✅ Update LDAP_IDENTITY and LDAP_PASSWORD with Google LDAP service account
# 7. ✅ Set LOG_SENSITIVE_DATA=false for production
# 8. ✅ Set ENVIRONMENT=production
# 9. ✅ Enable HTTPS for dashboard in production (set SESSION_COOKIE_SECURE=true)
# 10. ✅ NEVER commit .env file to version control (it's in .gitignore)
#
# =================================================================================
# End of Configuration
# =================================================================================